{"version":3,"file":"Our.Umbraco.Gmaps.js","sources":["../../../Client/assets/src/gmaps-editor.ts"],"sourcesContent":["import { LitElement, html, customElement, property } from \"@umbraco-cms/backoffice/external/lit\";\r\nimport { UmbPropertyEditorUiElement } from \"@umbraco-cms/backoffice/extension-registry\";\r\nimport { UmbPropertyValueChangeEvent } from \"@umbraco-cms/backoffice/property-editor\";\r\n\r\n@customElement(\"gmaps-property-editor-ui\")\r\nexport class GmapsPropertyEditorUIElement\r\n    extends LitElement\r\n    implements UmbPropertyEditorUiElement\r\n{\r\n    @property({ type: String })\r\n    public value = \"\";\r\n\r\n    marker?: any;\r\n\r\n    async firstUpdated() {\r\n        await import('https://maps.googleapis.com/maps/api/js?key=AIzaSyBpkGr_Bf9gxIXWEoBVvMbVZMv7HCXWE3U&v=beta');\r\n\r\n        let val = { 'lat': 55.406355270388346, 'lng': 10.389076778724018 }\r\n        if(this.value) {\r\n            val = JSON.parse(this.value);\r\n        }\r\n\r\n        const { Map } = await google.maps.importLibrary(\"maps\") as google.maps.MapsLibrary;\r\n        const { AdvancedMarkerElement } = await google.maps.importLibrary(\"marker\") as google.maps.MarkerLibrary;\r\n        const map = new Map(this.shadowRoot.getElementById('map') as HTMLElement, {\r\n            center: { lat: val.lat, lng: val.lng },\r\n            zoom: 14,\r\n            mapId: '4504f8b37365c3d0',\r\n        });\r\n\r\n        this.marker = new AdvancedMarkerElement({\r\n            map,\r\n            position: { lat: val.lat, lng: val.lng },\r\n            gmpDraggable: true\r\n        });\r\n\r\n        this.marker.addListener('dragend', this.dragend.bind(this));\r\n    }\r\n\r\n    dragend() {\r\n        console.log('marker', this.marker.position);\r\n        this.value = this.marker.position;\r\n        this.dispatchEvent(new UmbPropertyValueChangeEvent());\r\n    }\r\n    \r\n    render() {\r\n        return html`\r\n            <p>${this.value}</p>\r\n            <div style=\"height:300px; width:100%;\" id=\"map\"></div>\r\n        `;\r\n    }\r\n}\r\n\r\nexport default GmapsPropertyEditorUIElement;\r\n\r\ndeclare global {\r\n    interface HTMLElementTagNameMap {\r\n        \"gmaps-property-editor-ui\": GmapsPropertyEditorUIElement;\r\n    }\r\n}"],"names":["GmapsPropertyEditorUIElement","LitElement","val","Map","AdvancedMarkerElement","map","UmbPropertyValueChangeEvent","html","__decorateClass","property","customElement","GmapsPropertyEditorUIElement$1"],"mappings":";;;;;;;AAKa,IAAAA,IAAN,cACKC,EAEZ;AAAA,EAHO,cAAA;AAAA,UAAA,GAAA,SAAA,GAKH,KAAO,QAAQ;AAAA,EAAA;AAAA,EAIf,MAAM,eAAe;AACjB,UAAM,OAAO,4FAA4F;AAEzG,QAAIC,IAAM,EAAE,KAAO,oBAAoB,KAAO,mBAAmB;AACjE,IAAG,KAAK,UACEA,IAAA,KAAK,MAAM,KAAK,KAAK;AAG/B,UAAM,EAAE,KAAAC,EAAI,IAAI,MAAM,OAAO,KAAK,cAAc,MAAM,GAChD,EAAE,uBAAAC,EAAsB,IAAI,MAAM,OAAO,KAAK,cAAc,QAAQ,GACpEC,IAAM,IAAIF,EAAI,KAAK,WAAW,eAAe,KAAK,GAAkB;AAAA,MACtE,QAAQ,EAAE,KAAKD,EAAI,KAAK,KAAKA,EAAI,IAAI;AAAA,MACrC,MAAM;AAAA,MACN,OAAO;AAAA,IAAA,CACV;AAEI,SAAA,SAAS,IAAIE,EAAsB;AAAA,MACpC,KAAAC;AAAA,MACA,UAAU,EAAE,KAAKH,EAAI,KAAK,KAAKA,EAAI,IAAI;AAAA,MACvC,cAAc;AAAA,IAAA,CACjB,GAED,KAAK,OAAO,YAAY,WAAW,KAAK,QAAQ,KAAK,IAAI,CAAC;AAAA,EAC9D;AAAA,EAEA,UAAU;AACN,YAAQ,IAAI,UAAU,KAAK,OAAO,QAAQ,GACrC,KAAA,QAAQ,KAAK,OAAO,UACpB,KAAA,cAAc,IAAII,EAAA,CAA6B;AAAA,EACxD;AAAA,EAEA,SAAS;AACE,WAAAC;AAAA,iBACE,KAAK,KAAK;AAAA;AAAA;AAAA,EAGvB;AACJ;AAzCWC,EAAA;AAAA,EADNC,EAAS,EAAE,MAAM,QAAQ;AAAA,GAJjBT,EAKF,WAAA,SAAA,CAAA;AALEA,IAANQ,EAAA;AAAA,EADNE,EAAc,0BAA0B;AAAA,GAC5BV,CAAA;AAgDb,MAAAW,IAAeX;"}